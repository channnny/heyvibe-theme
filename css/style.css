/* =========================
   Reset & Base Typography
   ========================= */
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed,
figure, figcaption, footer, header, hgroup,
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin:0; padding:0; border:0; font-size:100%; font:inherit; vertical-align:baseline;
}
html { box-sizing:border-box; }
*, *::before, *::after { box-sizing:inherit; }

@font-face {
    font-family: 'NEXON Lv1 Gothic OTF';
    src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_20-04@2.1/NEXON Lv1 Gothic OTF.woff') format('woff');
    font-weight: normal;
    font-style: normal;
}

/* =========================
   Design Tokens
   ========================= */
:root{
    --bg: #0f1115;
    --panel: rgba(255,255,255,0.06);
    --panel-strong: rgba(255,255,255,0.10);
    --text: #e7e9ef;
    --muted:#9aa3b2;
    --line: rgba(255,255,255,0.12);

    --brand1:#7c5cff; /* 보라 */
    --brand2:#ff7a59; /* 코랄 */
    --good:#45CB85;
    --bad:#E08DAC;
    --warn:#DEAE7E;

    --radius:14px;
    --card-radius:16px;
    --shadow: 0 10px 30px rgba(0,0,0,.35);
    --glass: blur(10px) saturate(140%);
}

@media (prefers-color-scheme: light){
    :root{
        --bg:#f6f7fb; --panel:rgba(255,255,255,.65); --panel-strong:rgba(255,255,255,.85);
        --text:#151821; --muted:#5b6376; --line: rgba(17,24,39,.08);
        --shadow: 0 10px 30px rgba(16,24,40,.08);
    }
}

/* =========================
   Body
   ========================= */
body{
    margin:0; line-height:1.45;
    background:
            radial-gradient(1100px 700px at 15% -10%, rgba(124,92,255,.22), transparent 60%),
            radial-gradient(900px 700px at 110% 20%, rgba(255,122,89,.16), transparent 60%),
            var(--bg);
    color:var(--text);
    font-family: 'NEXON Lv1 Gothic OTF', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Apple SD Gothic Neo, Noto Sans KR, "맑은 고딕", sans-serif;
    letter-spacing:.2px;
}

/* =========================
   Header / Logo / Filter
   ========================= */
#header{
    height:auto; position:sticky; top:0; z-index:10;
    display:flex; align-items:center; justify-content:center;
    padding:20px 16px;
    backdrop-filter:var(--glass);
    background:linear-gradient(180deg, var(--panel-strong), var(--panel));
    border-bottom:1px solid var(--line);
    box-shadow: var(--shadow);
}

#logo{
    position:static; transform:none;
    margin-right:auto;
}
#logo p{display:flex; align-items:center}
#logo svg{display:block; filter:drop-shadow(0 4px 18px rgba(124,92,255,.25));}

#filter{
    width:auto; margin-top:0;
    display:flex; gap:10px; align-items:center; justify-content:flex-end; flex-wrap:wrap;
}

/* 필터 라인 */
#filter p{ text-align:center; display:flex; gap:8px; align-items:center; }

/* 공통 필터 컨테이너 (label + select) */
#filter label{
    display:flex; align-items:center; gap:10px;
    padding:8px 10px;
    background: var(--panel);
    border:1px solid var(--line);
    border-radius:12px;
}
#filter label > span{
    color:var(--muted); font-size:12px; font-weight:700; text-transform:uppercase; letter-spacing:.4px;
}

/* Select 스타일 (년/월) */
select{
    appearance:none; -webkit-appearance:none; -moz-appearance:none;
    border:none; outline:none; background:transparent;
    color:var(--text); font-weight:700; padding:8px 28px 8px 10px; border-radius:10px;
}
label:has(select){ position:relative; }
label:has(select)::after{
    content:"▾"; position:absolute; right:12px; top:50%; transform:translateY(-50%);
    font-size:12px; color:var(--muted); pointer-events:none;
}

/* =========================
   Switch (구조 유지, 스타일만 업그레이드)
   ========================= */
.c-switch{
    --switch-height: 35px;
    --switch-handle-size: calc(var(--switch-height) - 6px);
    display:inline-block; position:relative; min-width:56px; height:var(--switch-height);
    border:1px solid var(--line); background: rgba(255,255,255,.06); color:#fff;
    border-radius:999px; cursor:pointer; overflow:hidden; margin-left:8px;
    box-shadow: inset 0 0 0 1px rgba(255,255,255,.04);
}
.c-switch__input{ position:absolute; opacity:0; }
.c-switch__values{ display:flex; height:100%; align-items:center; }
.c-switch__value{ display:flex; align-items:center; padding:0 16px; flex:1; transition:opacity .25s; color:var(--muted); font-weight:700; font-size:12px; }
.c-switch__value--true{ justify-content:flex-start; }
.c-switch__value--false{ justify-content:flex-end; }

.c-switch__values::after{
    content:""; position:absolute; top:50%; left:3px; transform:translate(0,-50%);
    width:var(--switch-handle-size); height:var(--switch-handle-size); border-radius:999px;
    background: linear-gradient(90deg, var(--brand1), var(--brand2));
    box-shadow: 0 4px 14px rgba(0,0,0,.3);
    transition:left .25s ease, transform .25s ease, width .2s ease;
}
.c-switch__values:hover::after{ filter:saturate(115%); }
.c-switch__values:active::after{ width: calc(var(--switch-handle-size) + 8px); }
.c-switch__input:checked + .c-switch__values::after{ left: calc(100% - 3px); transform:translate(-100%, -50%); }
.c-switch__input:not(:checked) + .c-switch__values .c-switch__value--true{ opacity:.25; }
.c-switch__input:checked + .c-switch__values .c-switch__value--false{ opacity:.25; }

/* =========================
   Typography Bits
   ========================= */
h1{ margin:0; font-size:18px; text-align:center; }
.avatar{ border-radius:50%; display:block; }

/* =========================
   Scoreboard / User Card
   ========================= */
.scoreboard__user{
    max-width: 820px;
    margin: 12px auto 0;
    background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.04));
    border: 1px solid var(--line);
    border-radius: var(--card-radius);
    box-shadow: var(--shadow);
    overflow:hidden;
    transition: .25s transform cubic-bezier(0.22, 1, 0.36, 1), .25s opacity ease;
    opacity:0;
    transform: translate3d(0,-12px,0) scale(.99);
    position:relative;
}
.scoreboard__user.display{
    opacity:1; transform: translate3d(0,0,0) scale(1);
}
.scoreboard__user.displayed{
    transition: .5s transform cubic-bezier(0.22, 1, 0.36, 1), .25s opacity ease;
}
.scoreboard__user:hover{
    transform: translateY(-2px);
    box-shadow: 0 16px 44px rgba(0,0,0,.38);
}

.scoreboard__user__row{
    max-width: 820px;
    display:flex; align-items:center;
    max-height:none;
    padding: 16px 0;
}
.scoreboard__user__row div{ flex:1; padding: 0 24px; }
.scoreboard__user__row div:first-child{ padding-right:0; flex-grow:0; }
.scoreboard__user__row div:nth-child(2){ padding-right:0; flex-grow:0; }
.scoreboard__user__row div:last-child{ flex-grow:0; text-align:right; padding-left:0; }

.scoreboard__user__summary{ cursor:pointer; }

/* 상세영역 */
.scoreboard__user__stats{
    display:flex; flex-wrap:wrap;
    height:0; overflow:hidden;
    transition:.3s height cubic-bezier(0.22,1,0.36,1);
    border-top:1px dashed var(--line);
    background: rgba(255,255,255,.03);
}
.scoreboard__user__stats__info,
.scoreboard__user__stats__today{
    width: 100%;
    display:flex;
    border-bottom:1px dashed var(--line);
}
.scoreboard__user__stats__column{
    flex:1; padding:20px; border-right:1px dashed var(--line);
}
.scoreboard__user__stats__column:last-child{ border-right:0; }

.scoreboard__user__stats__title{
    display:block; font-size:14px; height:34px;
    background: rgba(255,255,255,.04);
    border-bottom:1px dashed var(--line);
    margin:-20px -20px 12px;
    padding:8px 0 0 20px; font-weight:700; color:var(--muted);
}

.scoreboard__user__stats__list{ list-style:none; padding:0; margin:0; }
.scoreboard__user__stats__list > li{
    display:flex; align-items:center; gap:10px; margin-top:10px;
}
.scoreboard__user__stats__list img{ display:block; flex-shrink:0; }
.scoreboard__user__stats__list strong{ flex:1; font-weight:600; }

/* 숫자/라벨 컬러 */
.score{ display:inline-block; font-weight:800; color:#5969e2; font-size:24px; }
.mini{ font-size:18px; }
.level{ display:inline-block; font-weight:700; color:#5969e2; font-size:14px; margin-left:16px; }
.score.good{ color: var(--good); }
.score.bad{ color: var(--bad); }
.score.overdrawn{ color: var(--warn); }
.position{ color: var(--warn); font-size:14px; }

/* =========================
   Responsive
   ========================= */
@media (max-width: 720px){
    #header{ padding:24px 12px; }
    #logo{ margin:0 auto 8px 0; }
    #filter{
        width:100%; padding:12px; gap:8px;
        border-top:1px solid var(--line);
        background: var(--panel);
        flex-wrap: wrap;
    }
    #filter p{
        flex-wrap: wrap;
        gap: 6px;
        justify-content: center;
    }
    #dateFilterUI {
        width: 100%;
        display: flex;
        justify-content: center;
        gap: 10px;
    }
    #dateFilterUI label {
        flex: 1;
        min-width: 120px;
        max-width: 150px;
    }
    .scoreboard{ max-width:720px; margin:auto; padding-top:10px; justify-content:center; }
}

@media (max-width: 480px){
    #header{ padding:28px 8px; }
    #filter{
        padding:16px 8px;
        gap: 6px;
    }
    #filter p{
        gap: 4px;
    }
    #dateFilterUI {
        flex-direction: column;
        gap: 8px;
    }
    #dateFilterUI label {
        flex: none;
        min-width: auto;
        max-width: none;
        width: 100%;
    }
    #dateFilterUI label span {
        display: block;
        margin-bottom: 4px;
        text-align: center;
    }
    #dateFilterUI select {
        width: 100%;
        text-align: center;
    }
}

@media (min-width: 720px){
    .scoreboard{
        max-width: 980px;
        margin:auto; padding: 10px 10px 10px;
        justify-content:center;
    }
}

/* ===== Light (White) Tone Override ===== */
:root{
    --bg:#ffffff;
    --panel:#ffffff;
    --panel-strong:#ffffff;
    --text:#111827;           /* 진한 텍스트 */
    --muted:#6b7280;          /* 보조 텍스트 */
    --line: rgba(17,24,39,.08);
    --shadow: 0 10px 30px rgba(16,24,40,.06);
}

/* 배경을 순백으로 */
body{
    background: #ffffff !important;
    color: var(--text);
}

/* 헤더를 흰색 바 */
#header{
    background: #ffffff !important;
    backdrop-filter: none !important;
    border-bottom: 1px solid var(--line);
    box-shadow: 0 2px 18px rgba(16,24,40,.04);
}

/* 로고 드롭섀도 약화 */
#logo svg{ filter: drop-shadow(0 2px 8px rgba(0,0,0,.06)); }

/* 필터 라벨 / 셀렉트 밝게 */
#filter label{
    background: #ffffff;
    border: 1px solid var(--line);
}
select{ color: var(--text); }

/* 스위치 배경을 라이트로 */
.c-switch{
    background: #f8fafc;
    border: 1px solid var(--line);
    box-shadow: inset 0 0 0 1px rgba(255,255,255,.6);
}
.c-switch__value{ color: var(--muted); }

/* 카드를 화이트 카드로 */
.scoreboard__user{
    background:#ffffff;
    border:1px solid var(--line);
    box-shadow: 0 10px 30px rgba(16,24,40,.06);
}
.scoreboard__user:hover{
    box-shadow: 0 16px 40px rgba(16,24,40,.08);
}

/* 상세영역 구분선/배경 라이트 */
.scoreboard__user__stats{
    background: #fafafa;
    border-top:1px dashed var(--line);
}
.scoreboard__user__stats__title{
    background:#f9fafb;
    border-bottom:1px dashed var(--line);
}
.scoreboard__user__stats__column{
    border-right:1px dashed var(--line);
}

/* 숫자/라벨 컬러 보정(너무 쨍하지 않게) */
.score{ color:#4f46e5; }        /* 인디고 */
.level{ color:#4f46e5; }
.score.good{ color:#16a34a; }    /* 그린 */
.score.bad{ color:#dc2626; }     /* 레드 */
.score.overdrawn, .position{ color:#b45309; } /* 앰버 브라운 */

/* 스위치: 선택 안된 라벨 완전 숨김(비침 방지) */
.c-switch__value{
    opacity: 0;
    visibility: hidden;      /* 렌더링 자체를 막아 잔상 제거 */
    pointer-events: none;    /* 숨김 상태 클릭 불가 */
    transition: opacity .25s ease; /* 보이는 쪽만 부드럽게 */
}

/* 체크 해제(보냄)일 때는 보냄만 보이기 */
.c-switch__input:not(:checked) + .c-switch__values .c-switch__value--false{
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
}

/* 체크(받음)일 때는 받음만 보이기 */
.c-switch__input:checked + .c-switch__values .c-switch__value--true{
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
}

.medal {
    font-size: 18px;
    vertical-align: middle;
    line-height: 1;
}

.medal--gold {
    /* optionally customize if needed */
}

.medal--silver {
    /* optionally customize if needed */
}

.medal--bronze {
    /* optionally customize if needed */
}

.scoreboard__user.top-rank {
    background: linear-gradient(90deg, #fffbe6, #fff3cd);
    border: 2px solid gold;
    box-shadow: 0 0 8px rgba(255, 215, 0, 0.6);
    border-radius: 12px;
}

.scoreboard__user__row div:first-child {
    padding-right: 0;
    flex-grow: 0;
}

.scoreboard__user__row div:first-child {
    padding-right: 0;
    flex-grow: 0;
    width: 40px;
    min-width: 40px;
    text-align: center;
}
.scoreboard__user__row div:first-child img {
    max-width: 20px;
    max-height: 20px;
    object-fit: contain;
}
